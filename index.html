<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/css/reset.css">
    <title>Hangman</title>
</head>
<body>
    <p>
        Press any key to get Started! <br>
        Current Word <br>
    </p>

    <div id="empty-word">- - - - -</div>
    
    <h3>Wins <span id="user-wins">0</span></h3>
    <h3>Number of guesses remaining <br> <span id="guess-remaining"></span> </h3>
    <h3>Letters Already Guessed <span id="guessed-letters"></span> </h3>
    
    
    <script type="text/javascript">

        /*
            We need to create the word first. 
            Then need to get the Lenght of the word. 
            Next create an array with Dashes based on the lenght above.

            when a letter is guessed than take that letter and index. 
            The index will be used to replace the Dash with the letter above. 
            At the same time, keep track of the dashes removed versus the lenght of the array.
            Once they equal than the person has guessed the word.
        */


        function resetGame(){
            guessCnt = 14;
            currentLetters = [];
        }

        // Begin App Start
        function appStart (){

            // Variables will be created once the Page/DOM is loaded
            var loadWins = document.getElementById("user-wins");
            var remainingGuessCnt = document.getElementById("guess-remaining");
            var lettersGuessed = document.getElementById("guessed-letters");
            var emptyLines = document.getElementById("empty-word");
            var guessCnt = 14;
            var wordArray = ["paper","scissor","rock","car","work"];
            var currentLetters = [];
            var wordLines = [];
            var currentWord = "";
            var wins = 0;
        
            // Creates random words
            function randomWord(){

                return wordArray[Math.floor(Math.random() * wordArray.length)];

            }


            // Random word will be loaded once the Page/DOM loads.
            currentWord = randomWord();


            // using the current word lenght we going to create the empty lines
            function createWordLines() {
                
                var lines = "";

                for(var i = 0; i < currentWord.length; i++){
                    wordLines.push("-");
                }

                // These are the lines that will be displayed
                for(var i = 0; i < wordLines.length; i++){
                    lines += wordLines[i] + " "
                }

                // remove the last space
                emptyLines.textContent = lines.substring(0, lines.length - 1);
                
            }

            // function will be used to replace empty line with Letter
            function removeGuessedLine(letter, index){

                var lines = "";

                wordLines[index] = letter;

                // Incorporate the new letter guessed
                for(var i = 0; i < wordLines.length; i++){
                    lines += wordLines[i] + " "
                }

                // remove the last space
                emptyLines.textContent = lines.substring(0, lines.length - 1);
            }

            function validateEmptyLines(){
                var result = 0;

                for(var i = 0; i < wordLines.length; i++){

                    if(wordLines[i]==="-"){
                        result++;
                    }
                }

                return result;
            }


            // Create the initial lines
            createWordLines();


            // Begin On Key Up function
            // When a key is pressed, the function below will begin
            document.onkeyup = function (event) {
                
                var userEntry = event.key.toLowerCase();
                var currentGuesses = "";
                currentLetters.push(userEntry);

                for(var i = 0; i < currentLetters.length; i++){
                    currentGuesses += currentLetters[i] + ",";
                }

                // load all the letters guessed
                lettersGuessed.textContent = currentGuesses.substring(0, currentGuesses.length - 1);

                for(var i = 0; currentWord.length; i++){
                    
                    if(currentWord.charAt(i) !== userEntry){
                        guessCnt--;
                        
                        if(guessCnt === 0){
                            console.log("You lost");
                            resetGame();
                            currentWord = randomWord();
                        }
                    }
                    else{
                        removeGuessedLine(userEntry,i);

                        // If no more empty lines then you won.
                        if(validateEmptyLines()===0){
                            console.log("You won");
                        }
                    }
                }


            }
            // End On Key Up function

        }
        // End App Start

        // Initialize all the variables and random letter once the Page/DOM is loaded.
        window.onload = function() {
            appStart();
        }

    
    </script>
</body>
</html>